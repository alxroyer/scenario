
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Known issues &#8212; scenario  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/pyramid.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="User test libraries" href="advanced.test-libs.html" />
    <link rel="prev" title="Error management" href="advanced.error-management.html" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Neuton&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nobile:regular,italic,bold,bolditalic&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->

  </head><body>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="advanced.test-libs.html" title="User test libraries"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="advanced.error-management.html" title="Error management"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">scenario  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="advanced.html" accesskey="U">Advanced usage</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Known issues</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="known-issues">
<span id="id1"></span><h1>Known issues<a class="headerlink" href="#known-issues" title="Permalink to this headline">¶</a></h1>
<p>One dilemma we commonly have to face when managing tests is to deal with known issues.</p>
<p>On the one hand, as long as a known issue exists, the feature that the test verifies cannot be said to be completely fulfilled.
Thus, putting the test in the <a class="reference internal" href="py/scenario.executionstatus.html#scenario.executionstatus.ExecutionStatus.FAIL" title="scenario.executionstatus.ExecutionStatus.FAIL"><code class="xref py py-const docutils literal notranslate"><span class="pre">ExecutionStatus.FAIL</span></code></a> status is a formal way
to mark the corresponding feature as not fully supported yet.</p>
<p>On the other hand, from the continuous integration point of view,
seeing the test in the <a class="reference internal" href="py/scenario.executionstatus.html#scenario.executionstatus.ExecutionStatus.FAIL" title="scenario.executionstatus.ExecutionStatus.FAIL"><code class="xref py py-const docutils literal notranslate"><span class="pre">ExecutionStatus.FAIL</span></code></a> status from day to day,
apparently because of that known issue,
may occult useful information on other possible regressions.</p>
<p>That’s the reason why the <a class="reference internal" href="py/scenario.html#module-scenario" title="scenario"><code class="xref py py-mod docutils literal notranslate"><span class="pre">scenario</span></code></a> framework provides an API in order to register known issues in the tests
(see <a class="reference internal" href="py/scenario.stepuserapi.html#scenario.stepuserapi.StepUserApi.knownissue" title="scenario.stepuserapi.StepUserApi.knownissue"><code class="xref py py-meth docutils literal notranslate"><span class="pre">StepUserApi.knownissue()</span></code></a> and <a class="reference internal" href="py/scenario.knownissues.html#scenario.knownissues.KnownIssue" title="scenario.knownissues.KnownIssue"><code class="xref py py-class docutils literal notranslate"><span class="pre">KnownIssue</span></code></a>).</p>
<section id="default-behaviour">
<span id="known-issues-default"></span><h2>Default behaviour<a class="headerlink" href="#default-behaviour" title="Permalink to this headline">¶</a></h2>
<p>By default, known issues are handled as simple warnings,
making the tests fall to the intermediate <a class="reference internal" href="py/scenario.executionstatus.html#scenario.executionstatus.ExecutionStatus.WARNINGS" title="scenario.executionstatus.ExecutionStatus.WARNINGS"><code class="xref py py-const docutils literal notranslate"><span class="pre">ExecutionStatus.WARNINGS</span></code></a> status.
The warnings are logged in the console, and saved in <a class="reference internal" href="advanced.reports.html#reports"><span class="std std-ref">test reports</span></a>.</p>
<p>This way, a regression will be highlighted as soon as it occurs by the continuous integration process,
in as much as the test will turn to the <a class="reference internal" href="py/scenario.executionstatus.html#scenario.executionstatus.ExecutionStatus.FAIL" title="scenario.executionstatus.ExecutionStatus.FAIL"><code class="xref py py-const docutils literal notranslate"><span class="pre">ExecutionStatus.FAIL</span></code></a> status.</p>
<p>This way, one can safely implement a workaround in a test affected by a known issue,
but track it formally in the same time.
Once the known issue has been fixed in the <em>software/system under test</em> (SUT),
the workaround and the known issue reference can be removed from the test,
hopefully turning the latter into the <a class="reference internal" href="py/scenario.executionstatus.html#scenario.executionstatus.ExecutionStatus.SUCCESS" title="scenario.executionstatus.ExecutionStatus.SUCCESS"><code class="xref py py-const docutils literal notranslate"><span class="pre">ExecutionStatus.SUCCESS</span></code></a> status.</p>
</section>
<section id="issue-levels">
<span id="known-issues-issue-levels"></span><h2>Issue levels<a class="headerlink" href="#issue-levels" title="Permalink to this headline">¶</a></h2>
<p>Issues may exist for various reasons, representing various criticities:</p>
<ol class="arabic simple">
<li><p>As introduced in the section before, an issue may be related to the <em>software/system under test</em> (SUT).</p></li>
<li><p>But talking about incremental development, it may also be because the SUT has not fully implemented a given feature yet,
this being planned in a later release, which is a less critical situation than (1).</p></li>
<li><p>The issue may also be related to defects of the test environment, which is obviously less critical than defects of the SUT itself (1).</p></li>
<li><p>But talking about the test environment, it may also be related to the context in which the tests are being executed
(Internet not ready, ability of the test platform, …) which may be less critical again than real defects of the test environment (3).</p></li>
<li><p><em>Other reasons…</em></p></li>
</ol>
<p>In order to discriminate the various situations, known issues may be registered with an issue level (<a class="reference internal" href="py/scenario.issuelevels.html#scenario.issuelevels.IssueLevel" title="scenario.issuelevels.IssueLevel"><code class="xref py py-class docutils literal notranslate"><span class="pre">IssueLevel</span></code></a>).</p>
<p>Issue levels are basically integer values.
The higher, the more critical.
Programmatically, they can be described by an <code class="docutils literal notranslate"><span class="pre">enum.IntEnum</span></code>.</p>
<p>They can be associated with meaningful names,
with the help of the <a class="reference internal" href="py/scenario.issuelevels.html#scenario.issuelevels.IssueLevel.definenames" title="scenario.issuelevels.IssueLevel.definenames"><code class="xref py py-meth docutils literal notranslate"><span class="pre">IssueLevel.definenames()</span></code></a> and/or <a class="reference internal" href="py/scenario.issuelevels.html#scenario.issuelevels.IssueLevel.addname" title="scenario.issuelevels.IssueLevel.addname"><code class="xref py py-meth docutils literal notranslate"><span class="pre">IssueLevel.addname()</span></code></a> methods,
or <a class="reference internal" href="advanced.config-db.html#config-db-scenario-issue-levels"><span class="std std-ref">scenario.issue_levels</span></a> configurations.
These names make it easier to read in the console, and maintain in the test code.</p>
<div class="tip admonition">
<p class="admonition-title">Enum-defined issue levels</p>
<p>If issue levels are defined with an <code class="docutils literal notranslate"><span class="pre">enum.IntEnum</span></code>,
this <code class="docutils literal notranslate"><span class="pre">enum.IntEnum</span></code> class can be passed on as is to the <a class="reference internal" href="py/scenario.issuelevels.html#scenario.issuelevels.IssueLevel.definenames" title="scenario.issuelevels.IssueLevel.definenames"><code class="xref py py-meth docutils literal notranslate"><span class="pre">IssueLevel.definenames()</span></code></a> method.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">enum</span>
<span class="kn">import</span> <span class="nn">scenario</span>


<span class="c1"># Define issue levels.</span>
<span class="k">class</span> <span class="nc">CommonIssueLevel</span><span class="p">(</span><span class="n">enum</span><span class="o">.</span><span class="n">IntEnum</span><span class="p">):</span>
    <span class="n">SUT</span> <span class="o">=</span> <span class="mi">40</span>
    <span class="n">TEST</span> <span class="o">=</span> <span class="mi">30</span>
    <span class="n">CONTEXT</span> <span class="o">=</span> <span class="mi">20</span>
    <span class="n">PLANNED</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">scenario</span><span class="o">.</span><span class="n">IssueLevel</span><span class="o">.</span><span class="n">definenames</span><span class="p">(</span><span class="n">CommonIssueLevel</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">MyStep</span><span class="p">(</span><span class="n">scenario</span><span class="o">.</span><span class="n">Step</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">step</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">STEP</span><span class="p">(</span><span class="s2">&quot;...&quot;</span><span class="p">)</span>

        <span class="c1"># Track a known issue, with issue level *PLANNED=10*.</span>
        <span class="c1"># By default, this known issue is logged in the console, and saved in JSON reports, as warning.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">knownissue</span><span class="p">(</span>
            <span class="n">level</span><span class="o">=</span><span class="n">CommonIssueLevel</span><span class="o">.</span><span class="n">PLANNED</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Waiting for feature XXX to be implemented&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Do not proceed with the following test actions and expected results until feature XXX is implemented.</span>
        <span class="c1"># if self.ACTION(&quot;...&quot;):</span>
        <span class="c1">#     ...</span>
</pre></div>
</div>
</div>
</section>
<section id="error-ignored-issue-level-thresholds">
<span id="knwon-issues-issue-level-ignored"></span><span id="known-issues-issue-level-error"></span><h2>Error / ignored issue level thresholds<a class="headerlink" href="#error-ignored-issue-level-thresholds" title="Permalink to this headline">¶</a></h2>
<p>Once issue levels are set, two issue level thresholds may be used when launching the test or campaign
in order to tell which issue levels should be considered as errors, warnings, or simply ignored.</p>
<table class="colwidths-auto docutils align-default" id="id2">
<caption><span class="caption-text">Error and ignored issue levels</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head stub"></th>
<th class="head"><p>Configuration</p></th>
<th class="head"><p>Effect</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><th class="stub"><p>Error issue level</p></th>
<td><p><code class="docutils literal notranslate"><span class="pre">--issue-level-error</span></code> option or <a class="reference internal" href="advanced.config-db.html#config-db-scenario-issue-level-error"><span class="std std-ref">scenario.issue_level_error</span></a> configuration</p></td>
<td><p>Known issues with issue level greater than or equal to the given value are considered as errors.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When the <em>error issue level</em> is set, known issues without issue level turn to errors by default.</p>
</div>
<p>Known errors don’t break the test execution as <a class="reference internal" href="advanced.error-management.html#errors"><span class="std std-ref">test exceptions</span></a> do.
By the way, several errors may be logged and saved in <a class="reference internal" href="advanced.reports.html#reports"><span class="std std-ref">test reports</span></a>.</p>
</td>
</tr>
<tr class="row-odd"><th class="stub"><p>Ignored issue level</p></th>
<td><p><code class="docutils literal notranslate"><span class="pre">--issue-level-ignored</span></code> option or <a class="reference internal" href="advanced.config-db.html#config-db-scenario-issue-level-ignored"><span class="std std-ref">scenario.issue_level_ignored</span></a> configuration</p></td>
<td><p>Known issues with issue level less than or equal to the given value are ignored.</p></td>
</tr>
</tbody>
</table>
<p>This way, without changing the test code,
permissive executions can be launched for continuous integration purpose,
but stricter executions can still be launched to constitute official test results.</p>
</section>
<section id="issue-identifiers">
<span id="known-issues-issue-ids"></span><h2>Issue identifiers<a class="headerlink" href="#issue-identifiers" title="Permalink to this headline">¶</a></h2>
<p>Known issues may be registered with an issue identifier, refering to a tier bugtracker tool.</p>
<p>Optionally, a URL builder handler may be installed (see <a class="reference internal" href="py/scenario.knownissues.html#scenario.knownissues.KnownIssue.seturlbuilder" title="scenario.knownissues.KnownIssue.seturlbuilder"><code class="xref py py-meth docutils literal notranslate"><span class="pre">KnownIssue.seturlbuilder()</span></code></a>),
in order to build URLs to the tier bugtracker tool from issue identifiers.
These URLs are then displayed in the console and saved in <a class="reference internal" href="advanced.reports.html#reports"><span class="std std-ref">test reports</span></a>,
and are usually directly clickable from both contexts.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">scenario</span>
<span class="kn">import</span> <span class="nn">typing</span>


<span class="c1"># Define and install a URL builder handler.</span>
<span class="k">def</span> <span class="nf">_urlbuilder</span><span class="p">(</span><span class="n">issue_id</span><span class="p">):</span>  <span class="c1"># type: (str) -&gt; typing.Optional[str]</span>
    <span class="k">if</span> <span class="n">issue_id</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;https://repo/issues/</span><span class="si">{</span><span class="n">issue_id</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;#&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="c1"># Unexpected issue id format, return `None` for no URL.</span>
    <span class="k">return</span> <span class="kc">None</span>
<span class="n">scenario</span><span class="o">.</span><span class="n">KnownIssue</span><span class="o">.</span><span class="n">seturlbuilder</span><span class="p">(</span><span class="n">_url_builder</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">MyStep</span><span class="p">(</span><span class="n">scenario</span><span class="o">.</span><span class="n">Step</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">step</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">STEP</span><span class="p">(</span><span class="s2">&quot;...&quot;</span><span class="p">)</span>

        <span class="c1"># Track issue #10.</span>
        <span class="c1"># Thanks to the URL builder handler, the &#39;https://repo/issues/10&#39; URL is displayed in the console and saved in JSON reports.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">knownissue</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;#10&quot;</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Waiting for feature #10 to be implemented&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Do not proceed with the following test actions and expected results until feature #10 is implemented.</span>
        <span class="c1"># if self.ACTION(&quot;...&quot;):</span>
        <span class="c1">#     ...</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><a class="reference internal" href="#known-issues-issue-levels"><span class="std std-ref">Issue levels</span></a> and <a class="reference internal" href="#known-issues-issue-ids"><span class="std std-ref">issue identifiers</span></a> can be used in the same time
when registering known issues.</p>
</div>
</section>
<section id="registration-definition-v-s-execution-level">
<span id="known-issues-registration-level"></span><h2>Registration: definition v/s execution level<a class="headerlink" href="#registration-definition-v-s-execution-level" title="Permalink to this headline">¶</a></h2>
<p>It is generally preferrable to register known issues at the definition level (i.e. outside action / result blocks).
Doing so, even though an error occurs during a test execution, known issues are still saved with the test results.</p>
<p>Nevertheless, certain known issues can’t be registered at the definition level
(issues related to the test execution context for instance).
For such situations, it remains possible to register known issues at the execution level (i.e. inside action / result blocks),
but there is no guarantee that the known issue will be saved with the test results, since it depends on the test execution.</p>
<div class="tip admonition">
<p class="admonition-title">Known issues from test libraries</p>
<p>The <a class="reference internal" href="py/scenario.scenariostack.html#scenario.scenariostack.ScenarioStack.knownissue" title="scenario.scenariostack.ScenarioStack.knownissue"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ScenarioStack.knownissue()</span></code></a> is provided
in order to register known issues from anywhere in <a class="reference internal" href="advanced.test-libs.html#test-libs"><span class="std std-ref">test libraries</span></a>.</p>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Known issues</a><ul>
<li><a class="reference internal" href="#default-behaviour">Default behaviour</a></li>
<li><a class="reference internal" href="#issue-levels">Issue levels</a></li>
<li><a class="reference internal" href="#error-ignored-issue-level-thresholds">Error / ignored issue level thresholds</a></li>
<li><a class="reference internal" href="#issue-identifiers">Issue identifiers</a></li>
<li><a class="reference internal" href="#registration-definition-v-s-execution-level">Registration: definition v/s execution level</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="advanced.error-management.html"
                          title="previous chapter">Error management</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="advanced.test-libs.html"
                          title="next chapter">User test libraries</a></p>
  </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="advanced.test-libs.html" title="User test libraries"
             >next</a> |</li>
        <li class="right" >
          <a href="advanced.error-management.html" title="Error management"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">scenario  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="advanced.html" >Advanced usage</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Known issues</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020-2023 Alexis Royer &lt;https://github.com/alxroyer/scenario&gt;.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.4.0.
    </div>
  </body>
</html>