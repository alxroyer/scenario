
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Sub-scenarios: reuse of scenarios in other scenarios &#8212; scenario  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/pyramid.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Goto" href="advanced.goto.html" />
    <link rel="prev" title="Configuration database" href="advanced.config-db.html" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Neuton&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nobile:regular,italic,bold,bolditalic&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->

  </head><body>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="advanced.goto.html" title="Goto"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="advanced.config-db.html" title="Configuration database"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">scenario  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="advanced.html" accesskey="U">Advanced usage</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Sub-scenarios: reuse of scenarios in other scenarios</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="sub-scenarios-reuse-of-scenarios-in-other-scenarios">
<span id="subscenarios"></span><h1>Sub-scenarios: reuse of scenarios in other scenarios<a class="headerlink" href="#sub-scenarios-reuse-of-scenarios-in-other-scenarios" title="Permalink to this headline">¶</a></h1>
<p>Scenarios can be reused as subscenarios in other ones.</p>
<p>Executing existing scenarios as sub-scenarios are particularly useful
for the following purposes:</p>
<ul class="simple">
<li><p>define alternative scenarios (error scenarios) from a nominal one,</p></li>
<li><p>reuse a nominal scenario as the initial condition of other ones,
in order to bring the system or software under test in the expected initial state,</p></li>
<li><p>repeat a base scenario with varying input data.</p></li>
</ul>
<section id="alternative-scenarios">
<span id="subscenarios-alternative-scenarios"></span><h2>Alternative scenarios<a class="headerlink" href="#alternative-scenarios" title="Permalink to this headline">¶</a></h2>
<div class="admonition-todo admonition" id="id1">
<p class="admonition-title">Todo</p>
<p>Documentation needed for alternative scenarios.</p>
</div>
</section>
<section id="initial-conditions">
<span id="subscenarios-initial-conditions"></span><h2>Initial conditions<a class="headerlink" href="#initial-conditions" title="Permalink to this headline">¶</a></h2>
<div class="admonition-todo admonition" id="id2">
<p class="admonition-title">Todo</p>
<p>Documentation needed for initial conditions.</p>
</div>
</section>
<section id="varying-input-data">
<span id="subscenarios-varying-input-data"></span><h2>Varying input data<a class="headerlink" href="#varying-input-data" title="Permalink to this headline">¶</a></h2>
<p>In order to illustrate this use case of subscenarios,
let’s get back to the previous <code class="docutils literal notranslate"><span class="pre">CommutativeAddition</span></code> scenario
defined <a class="reference internal" href="quickstart.html#quickstart-first-scenario"><span class="std std-ref">previously</span></a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">CommutativeAddition</span></code> scenario can be called multiple times, with different inputs,
in a super <code class="docutils literal notranslate"><span class="pre">CommutativeAdditions</span></code> scenario:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">pathlib</span>
<span class="linenos"> 4</span><span class="kn">import</span> <span class="nn">scenario</span>
<span class="linenos"> 5</span><span class="kn">import</span> <span class="nn">sys</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="p">))</span>
<span class="linenos"> 8</span><span class="kn">from</span> <span class="nn">commutativeaddition</span> <span class="kn">import</span> <span class="n">CommutativeAddition</span>  <span class="c1"># noqa: E402</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="k">class</span> <span class="nc">CommutativeAdditions</span><span class="p">(</span><span class="n">scenario</span><span class="o">.</span><span class="n">Scenario</span><span class="p">):</span>
<span class="linenos">12</span>
<span class="linenos">13</span>    <span class="n">SHORT_TITLE</span> <span class="o">=</span> <span class="s2">&quot;Commutative additions&quot;</span>
<span class="linenos">14</span>    <span class="n">TEST_GOAL</span> <span class="o">=</span> <span class="s2">&quot;Call the CommutativeAddition scenario with different inputs.&quot;</span>
<span class="linenos">15</span>
<span class="linenos">16</span>    <span class="k">def</span> <span class="nf">step010</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">17</span>        <span class="bp">self</span><span class="o">.</span><span class="n">STEP</span><span class="p">(</span><span class="s2">&quot;Both positive members&quot;</span><span class="p">)</span>
<span class="linenos">18</span>
<span class="linenos">19</span>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ACTION</span><span class="p">(</span><span class="s2">&quot;Launch the CommutativeAddition scenario with 4 and 5 for inputs.&quot;</span><span class="p">):</span>
<span class="linenos">20</span>            <span class="n">_scenario</span> <span class="o">=</span> <span class="n">CommutativeAddition</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="linenos">21</span>            <span class="n">scenario</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">executescenario</span><span class="p">(</span><span class="n">_scenario</span><span class="p">)</span>
<span class="linenos">22</span>
<span class="linenos">23</span>    <span class="k">def</span> <span class="nf">step020</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">24</span>        <span class="bp">self</span><span class="o">.</span><span class="n">STEP</span><span class="p">(</span><span class="s2">&quot;Positive and negative members&quot;</span><span class="p">)</span>
<span class="linenos">25</span>
<span class="linenos">26</span>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ACTION</span><span class="p">(</span><span class="s2">&quot;Launch the CommutativeAddition scenario with -1 and 3 for inputs.&quot;</span><span class="p">):</span>
<span class="linenos">27</span>            <span class="n">_scenario</span> <span class="o">=</span> <span class="n">CommutativeAddition</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="linenos">28</span>            <span class="n">scenario</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">executescenario</span><span class="p">(</span><span class="n">_scenario</span><span class="p">)</span>
<span class="linenos">29</span>
<span class="linenos">30</span>    <span class="k">def</span> <span class="nf">step030</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">31</span>        <span class="bp">self</span><span class="o">.</span><span class="n">STEP</span><span class="p">(</span><span class="s2">&quot;Both negative members&quot;</span><span class="p">)</span>
<span class="linenos">32</span>
<span class="linenos">33</span>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ACTION</span><span class="p">(</span><span class="s2">&quot;Launch the CommutativeAddition scenario with -1 and -7 for inputs.&quot;</span><span class="p">):</span>
<span class="linenos">34</span>            <span class="n">_scenario</span> <span class="o">=</span> <span class="n">CommutativeAddition</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">7</span><span class="p">)</span>
<span class="linenos">35</span>            <span class="n">scenario</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">executescenario</span><span class="p">(</span><span class="n">_scenario</span><span class="p">)</span>
</pre></div>
</div>
<p>To do so, start with loading your base scenario with a regular <code class="docutils literal notranslate"><span class="pre">import</span></code> statement:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">commutativeaddition</span> <span class="kn">import</span> <span class="n">CommutativeAddition</span>  <span class="c1"># noqa: E402</span>
</pre></div>
</div>
<p>Instanciate it with the appropriate values:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>            <span class="n">_scenario</span> <span class="o">=</span> <span class="n">CommutativeAddition</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>And execute it as a subscenario:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>            <span class="n">scenario</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">executescenario</span><span class="p">(</span><span class="n">_scenario</span><span class="p">)</span>
</pre></div>
</div>
<p>Executing this super scenario produces the following output:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ./bin/run-test.py ./demo/commutativeadditions.py
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>SCENARIO &#39;demo/commutativeadditions.py&#39;
------------------------------------------------


STEP#1: Both positive members (demo/commutativeadditions.py:16:CommutativeAdditions.step010)
------------------------------------------------
    ACTION: Launch the CommutativeAddition scenario with 4 and 5 for inputs.
      | SCENARIO &#39;demo/commutativeaddition.py&#39;
      | ------------------------------------------------
      |
      | STEP#1: Initial conditions (demo/commutativeaddition.py:18:CommutativeAddition.step000)
      | ------------------------------------------------
      |     ACTION: Let a = 4, and b = 5
      |   EVIDENCE:   -&gt; a = 4
      |   EVIDENCE:   -&gt; b = 5
      |
      | STEP#2: a + b (demo/commutativeaddition.py:25:CommutativeAddition.step010)
      | ------------------------------------------------
      |     ACTION: Compute (a + b) and store the result as result1.
      |   EVIDENCE:   -&gt; result1 = 9
      |
      | STEP#3: b + a (demo/commutativeaddition.py:32:CommutativeAddition.step020)
      | ------------------------------------------------
      |     ACTION: Compute (b + a) and store the result as result2.
      |   EVIDENCE:   -&gt; result2 = 9
      |
      | STEP#4: Check (demo/commutativeaddition.py:39:CommutativeAddition.step030)
      | ------------------------------------------------
      |     ACTION: Compare result1 and result2.
      |     RESULT: result1 and result2 are the same.
      |   EVIDENCE:   -&gt; 9 == 9
      |
      | END OF &#39;demo/commutativeaddition.py&#39;

STEP#2: Positive and negative members (demo/commutativeadditions.py:23:CommutativeAdditions.step020)
------------------------------------------------
    ACTION: Launch the CommutativeAddition scenario with -1 and 3 for inputs.
      | SCENARIO &#39;demo/commutativeaddition.py&#39;
      | ------------------------------------------------
      |
      | STEP#1: Initial conditions (demo/commutativeaddition.py:18:CommutativeAddition.step000)
      | ------------------------------------------------
      |     ACTION: Let a = -1, and b = 3
      |   EVIDENCE:   -&gt; a = -1
      |   EVIDENCE:   -&gt; b = 3
      |
      | STEP#2: a + b (demo/commutativeaddition.py:25:CommutativeAddition.step010)
      | ------------------------------------------------
      |     ACTION: Compute (a + b) and store the result as result1.
      |   EVIDENCE:   -&gt; result1 = 2
      |
      | STEP#3: b + a (demo/commutativeaddition.py:32:CommutativeAddition.step020)
      | ------------------------------------------------
      |     ACTION: Compute (b + a) and store the result as result2.
      |   EVIDENCE:   -&gt; result2 = 2
      |
      | STEP#4: Check (demo/commutativeaddition.py:39:CommutativeAddition.step030)
      | ------------------------------------------------
      |     ACTION: Compare result1 and result2.
      |     RESULT: result1 and result2 are the same.
      |   EVIDENCE:   -&gt; 2 == 2
      |
      | END OF &#39;demo/commutativeaddition.py&#39;

STEP#3: Both negative members (demo/commutativeadditions.py:30:CommutativeAdditions.step030)
------------------------------------------------
    ACTION: Launch the CommutativeAddition scenario with -1 and -7 for inputs.
      | SCENARIO &#39;demo/commutativeaddition.py&#39;
      | ------------------------------------------------
      |
      | STEP#1: Initial conditions (demo/commutativeaddition.py:18:CommutativeAddition.step000)
      | ------------------------------------------------
      |     ACTION: Let a = -1, and b = -7
      |   EVIDENCE:   -&gt; a = -1
      |   EVIDENCE:   -&gt; b = -7
      |
      | STEP#2: a + b (demo/commutativeaddition.py:25:CommutativeAddition.step010)
      | ------------------------------------------------
      |     ACTION: Compute (a + b) and store the result as result1.
      |   EVIDENCE:   -&gt; result1 = -8
      |
      | STEP#3: b + a (demo/commutativeaddition.py:32:CommutativeAddition.step020)
      | ------------------------------------------------
      |     ACTION: Compute (b + a) and store the result as result2.
      |   EVIDENCE:   -&gt; result2 = -8
      |
      | STEP#4: Check (demo/commutativeaddition.py:39:CommutativeAddition.step030)
      | ------------------------------------------------
      |     ACTION: Compare result1 and result2.
      |     RESULT: result1 and result2 are the same.
      |   EVIDENCE:   -&gt; -8 == -8
      |
      | END OF &#39;demo/commutativeaddition.py&#39;

END OF &#39;demo/commutativeadditions.py&#39;
------------------------------------------------
             Status: SUCCESS
    Number of STEPs: 3/3
  Number of ACTIONs: 3/3
  Number of RESULTs: 0/0
               Time: HH:MM:SS.mmmmmm
</pre></div>
</div>
<p>Each subscenario execution appears indented with a pipe character.</p>
<div class="note admonition">
<p class="admonition-title">Subscenario nestings</p>
<p>A subscenario may call other subscenarios.</p>
<p>For each subscenario in the execution stack,
a pipe indentation is inserted in the log lines,
in order to highlight the scenario and subscenario execution nestings.</p>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Sub-scenarios: reuse of scenarios in other scenarios</a><ul>
<li><a class="reference internal" href="#alternative-scenarios">Alternative scenarios</a></li>
<li><a class="reference internal" href="#initial-conditions">Initial conditions</a></li>
<li><a class="reference internal" href="#varying-input-data">Varying input data</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="advanced.config-db.html"
                          title="previous chapter">Configuration database</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="advanced.goto.html"
                          title="next chapter">Goto</a></p>
  </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="advanced.goto.html" title="Goto"
             >next</a> |</li>
        <li class="right" >
          <a href="advanced.config-db.html" title="Configuration database"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">scenario  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="advanced.html" >Advanced usage</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Sub-scenarios: reuse of scenarios in other scenarios</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020-2023 Alexis Royer &lt;https://github.com/alxroyer/scenario&gt;.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.4.0.
    </div>
  </body>
</html>